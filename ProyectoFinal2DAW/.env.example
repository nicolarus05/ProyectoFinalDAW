# ==============================================================================
# CONFIGURACIÓN DE APLICACIÓN - SaaS Multi-Tenant para Salones de Belleza
# ==============================================================================
# Este archivo contiene todas las variables de entorno necesarias para el proyecto.
# Copia este archivo como .env y configura los valores según tu entorno.

# ------------------------------------------------------------------------------
# APLICACIÓN PRINCIPAL
# ------------------------------------------------------------------------------
# Nombre de la aplicación (se muestra en emails y notificaciones)
APP_NAME="Laravel Multi-Tenant SaaS"

# Entorno: local, staging, production
APP_ENV=local

# Clave de cifrado de Laravel (generar con: php artisan key:generate)
APP_KEY=base64:GENERA_UNA_NUEVA_CLAVE_CON_ARTISAN_KEY_GENERATE

# Modo debug (true en desarrollo, false en producción)
APP_DEBUG=true

# URL base de la aplicación (sin barra final)
APP_URL=http://localhost:90

# URL para assets (CDN o mismo servidor)
ASSET_URL=http://localhost:90

# Puerto para Laravel Sail
APP_PORT=90

# Puerto para Vite dev server
VITE_PORT=5173

# Usuario y grupo para Docker (generalmente 1000 en Linux)
WWWUSER=1000
WWWGROUP=1000

# ------------------------------------------------------------------------------
# LOCALIZACIÓN
# ------------------------------------------------------------------------------
APP_LOCALE=es
APP_FALLBACK_LOCALE=es
APP_FAKER_LOCALE=es_ES

# Zona horaria (importante para citas y horarios)
APP_TIMEZONE=Europe/Madrid

# ------------------------------------------------------------------------------
# MANTENIMIENTO Y LOGGING
# ------------------------------------------------------------------------------
# Driver de modo mantenimiento: file, cache
APP_MAINTENANCE_DRIVER=file
# APP_MAINTENANCE_STORE=database

# Número de workers para PHP CLI Server
PHP_CLI_SERVER_WORKERS=4

# Rounds de encriptación Bcrypt (más alto = más seguro pero más lento)
BCRYPT_ROUNDS=12

# Canal de log: stack, single, daily, slack, syslog, errorlog
LOG_CHANNEL=stack
LOG_STACK=single
LOG_DEPRECATIONS_CHANNEL=null
LOG_LEVEL=debug

# ------------------------------------------------------------------------------
# BASE DE DATOS
# ------------------------------------------------------------------------------
# Conexión principal (MySQL)
DB_CONNECTION=mysql
DB_HOST=mysql
DB_PORT=3306
DB_DATABASE=laravel
DB_USERNAME=sail
DB_PASSWORD=password

# IMPORTANTE: Para multi-tenancy, cada tenant tiene su propia BD
# El sistema crea automáticamente bases de datos por tenant

# ------------------------------------------------------------------------------
# SESIONES
# ------------------------------------------------------------------------------
# Driver de sesión: file, cookie, database, memcached, redis
SESSION_DRIVER=file

# Tiempo de vida de la sesión en minutos
SESSION_LIFETIME=120

# IMPORTANTE: Para multi-tenancy
# SESSION_CONNECTION debe estar comentado para usar la conexión del tenant
# SESSION_CONNECTION=central

# SESSION_DOMAIN debe estar vacío para que funcione con subdominios
# SESSION_DOMAIN=.localhost

# Cookie segura (true en producción con HTTPS)
SESSION_SECURE_COOKIE=false

# SameSite: lax, strict, none
SESSION_SAME_SITE=lax

# ------------------------------------------------------------------------------
# BROADCASTING
# ------------------------------------------------------------------------------
# Driver de broadcasting: log, pusher, ably, redis, null
BROADCAST_CONNECTION=log

# ------------------------------------------------------------------------------
# CACHÉ
# ------------------------------------------------------------------------------
# Driver de caché: file, redis, memcached, dynamodb, database, array
CACHE_STORE=file
CACHE_DRIVER=file

# Prefijo de caché (útil para separar entornos)
# CACHE_PREFIX=

# Configuración de Memcached
MEMCACHED_HOST=127.0.0.1

# ------------------------------------------------------------------------------
# REDIS (Recomendado para producción)
# ------------------------------------------------------------------------------
# Cliente Redis: phpredis o predis
REDIS_CLIENT=phpredis
REDIS_HOST=127.0.0.1
REDIS_PASSWORD=null
REDIS_PORT=6379

# ------------------------------------------------------------------------------
# COLAS (QUEUES)
# ------------------------------------------------------------------------------
# Driver de colas: sync, database, redis, sqs, beanstalkd
# sync = procesa inmediatamente, database = usa BD, redis = recomendado para producción
QUEUE_CONNECTION=database

# ------------------------------------------------------------------------------
# SISTEMA DE ARCHIVOS
# ------------------------------------------------------------------------------
# Disco por defecto: local, public, s3
FILESYSTEM_DISK=public

# Configuración de AWS S3 (si se usa)
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_DEFAULT_REGION=us-east-1
AWS_BUCKET=
AWS_USE_PATH_STYLE_ENDPOINT=false

# ------------------------------------------------------------------------------
# CORREO ELECTRÓNICO
# ------------------------------------------------------------------------------
# Driver de mail: smtp, sendmail, mailgun, ses, postmark, log
MAIL_MAILER=smtp

# Configuración SMTP
MAIL_HOST=smtp.gmail.com
MAIL_PORT=587
MAIL_USERNAME=tu-email@gmail.com
MAIL_PASSWORD="tu-app-password-de-gmail"
MAIL_ENCRYPTION=tls

# Remitente por defecto
MAIL_FROM_ADDRESS=noreply@tusalon.com
MAIL_FROM_NAME="${APP_NAME}"

# ------------------------------------------------------------------------------
# SERVICIOS EXTERNOS
# ------------------------------------------------------------------------------
# Pusher (para broadcasting en tiempo real)
PUSHER_APP_ID=
PUSHER_APP_KEY=
PUSHER_APP_SECRET=
PUSHER_HOST=
PUSHER_PORT=443
PUSHER_SCHEME=https
PUSHER_APP_CLUSTER=mt1

# ------------------------------------------------------------------------------
# VITE (BUILD DE ASSETS)
# ------------------------------------------------------------------------------
VITE_APP_NAME="${APP_NAME}"

# Si usas Pusher con Vite
VITE_PUSHER_APP_KEY="${PUSHER_APP_KEY}"
VITE_PUSHER_HOST="${PUSHER_HOST}"
VITE_PUSHER_PORT="${PUSHER_PORT}"
VITE_PUSHER_SCHEME="${PUSHER_SCHEME}"
VITE_PUSHER_APP_CLUSTER="${PUSHER_APP_CLUSTER}"

# ------------------------------------------------------------------------------
# CONFIGURACIONES PERSONALIZADAS DEL PROYECTO
# ------------------------------------------------------------------------------

# Dominio central para tenancy (sin http://)
CENTRAL_DOMAINS=localhost,127.0.0.1

# Prefijo de subdominios para tenants (ej: salon1.tusalon.com)
TENANT_DOMAIN_SUFFIX=.localhost

# Habilitar registro de nuevos tenants (true/false)
ALLOW_TENANT_REGISTRATION=true

# Límite de tenants (0 = ilimitado)
MAX_TENANTS=0

# Configuración de backups automáticos
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"
BACKUP_RETENTION_DAYS=30

# Configuración de notificaciones
NOTIFICATION_ENABLED=true
NOTIFICATION_CHANNELS=mail,database

# Recordatorios de citas (horas antes)
APPOINTMENT_REMINDER_HOURS=24

# Configuración de salón
DEFAULT_SALON_TIMEZONE=Europe/Madrid
DEFAULT_SALON_CURRENCY=EUR
DEFAULT_SALON_LANGUAGE=es

# ------------------------------------------------------------------------------
# SEGURIDAD
# ------------------------------------------------------------------------------
# Tiempo de expiración de tokens de reset de contraseña (minutos)
PASSWORD_RESET_TIMEOUT=60

# Habilitar verificación de email
EMAIL_VERIFICATION_ENABLED=false

# Rate limiting (requests por minuto)
THROTTLE_LIMIT=60

# ------------------------------------------------------------------------------
# DESARROLLO Y DEBUG
# ------------------------------------------------------------------------------
# Habilitar Laravel Telescope (solo desarrollo)
TELESCOPE_ENABLED=false

# Habilitar Laravel Debugbar (solo desarrollo)
DEBUGBAR_ENABLED=false

# ------------------------------------------------------------------------------
# MONITOREO Y PERFORMANCE
# ------------------------------------------------------------------------------
# Habilitar health checks
HEALTH_CHECK_ENABLED=true

# Sentry (monitoreo de errores en producción)
# SENTRY_LARAVEL_DSN=
# SENTRY_TRACES_SAMPLE_RATE=1.0

# New Relic (monitoreo de performance)
# NEW_RELIC_LICENSE_KEY=
# NEW_RELIC_APP_NAME=

# ------------------------------------------------------------------------------
# NOTAS IMPORTANTES
# ------------------------------------------------------------------------------
# 1. Nunca subir el archivo .env a control de versiones
# 2. Generar APP_KEY con: php artisan key:generate
# 3. En producción: APP_DEBUG=false, APP_ENV=production
# 4. Usar HTTPS en producción: SESSION_SECURE_COOKIE=true
# 5. Configurar backups automáticos antes de ir a producción
# 6. Cambiar credenciales de BD y mail en producción
# 7. Para Gmail: usar App Passwords, no la contraseña normal
# ==============================================================================
