Quiero que realices este prompt pero antes quiero que consultes informacion oficial de tenants y laravel.

Toma el repo Laravel v12.8.1 y transforma la aplicación en un SaaS multi-tenant con una base de datos separada por cliente y subdominios (ej. lola.misalon.com). Implementa y entrega código, scripts y documentación listos para producción. Sigue estos requisitos concretos:

1. Paquete: instala y configura stancl/tenancy.
   - Ejecuta: composer require stancl/tenancy && php artisan tenancy:install.
   - Registra TenancyServiceProvider si hace falta.
   - Implementa app/Models/Tenant.php usando HasDatabase y HasDomains y configura 'tenant_model' en config/tenancy.php.

2. Migraciones:
   - Mueve las migraciones de la app (users, clientes, productos, citas, sessions si usas SESSION_DRIVER=database) a database/migrations/tenant/.
   - Mantén migraciones centrales (tenants, domains) en database/migrations/.
   - Asegura que las migraciones tenant no dependan del orden problemático.
   - Proporciona comando y CI step para: php artisan migrate (central) y php artisan tenants:migrate (tenants).

3. Flujo de registro (crear tenant):
   - Implementa controlador/servicio para registrar un nuevo salón desde el dominio central:
     * validar datos
     * crear registro central si aplica
     * crear Tenant con withDomains(['{slug}.MISALON_DOMAIN']) y save()
     * tenancy()->initialize($tenant); ejecutar migraciones/seed en tenant si es necesario
     * crear usuario admin dentro del tenant (en su DB)
     * iniciar sesión y redirigir a https://{slug}.MISALON_DOMAIN
   - Usa tenancy events/hooks para crear DB y ejecutar migraciones automáticas.

4. Rutas y middleware:
   - Mantén routes/web.php para rutas centrales (landing, registro, login central) bajo Route::domain(MISALON_DOMAIN)->group().
   - Mantén routes/tenant.php con middleware: 'web', InitializeTenancyBySubdomain::class, PreventAccessFromCentralDomains::class.
   - Verifica que app/Http/Kernel.php incluye StartSession en el grupo 'web'.

5. Sesiones y auth:
   - Recomendación: SESSION_DRIVER=database y SESSION_DOMAIN=.MISALON_DOMAIN
   - Asegura que la tabla sessions exista en las BD tenants (migración tenant crea sessions) o documenta alternativa (Redis con tenancy bootstrapper).
   - Verifica que el login en subdominio usa la tabla users tenant y que las cookies funcionan con dominio wildcard.

6. Storage / archivos:
   - Configura storage para separar por tenant: storage/app/tenants/{tenant_id}/... o S3 con prefijo tenant_{id}/.
   - Actualiza código de subida de archivos para usar la ruta/driver tenant-aware.

7. Jobs / cache / queues:
   - Asegúrate de que workers (queues) sean tenancy-aware o elige ejecutar workers por tenant.
   - Si usas Redis, configura RedisTenancyBootstrapper.

8. Backups:
   - Entrega script (bash/php) que recorra todos los tenants y haga dump de cada DB (mysqldump/pg_dump) con nombre timestamp y tenant_id.
   - Añade instrucción para restaurar un dump de tenant en entorno nuevo.

9. Despliegue en Render:
   - Incluye pasos para crear Web Service en Render, añadir dominios: MISALON_DOMAIN y *.MISALON_DOMAIN (indica si el plan necesita pago).
   - Lista variables de entorno necesarias (.env.example): APP_KEY, DB_* (central), SESSION_DOMAIN, TENANCY_*, RENDER-specific.
   - Indica build/start commands y deploy hooks para ejecutar migraciones centrales y tenants:migrate.

10. Seguridad y operaciones:
    - Añade política para eliminación segura de tenant (dump + confirmación + drop DB).
    - Documenta backups, rotación, y límites de nombres de BD.
    - Documenta cómo crear tenant manualmente (artisan commands).

11. Tests y QA (obligatorio):
    - Implementa pruebas automáticas (PHPUnit) que:
      A) creen dos tenants (lola, belen), verifiquen creación de DBs;
      B) creen usuario y datos en cada tenant y confirmen aislamiento;
      C) prueben login en cada subdominio y que la sesión se guarda en la DB del tenant;
      D) prueben que tenants:migrate aplica migraciones a una DB tenant.
    - Entrega un script e2e (cypress/phpspec) o comandos curl que validen los flujos.

12. Entregables:
    - PR con cambios en repo, migraciones movidas, Tenant model, nuevos controllers/services, scripts de backup, tests verdes.
    - README.md con pasos para local dev (hosts file o valet), deploy en Render y checklist de post-deploy.

Notas: pide acceso al repo (URL + branch), credenciales de Render o instrucciones para conectar CI, y el dominio MISALON_DOMAIN. No asumas nada sobre el proveedor de DB; valídalo (MySQL/Postgres).

Criterios de aceptación: la IA debe entregar el PR con código y los tests que pasan localmente; además debe proveer instrucciones concretas para ejecutar los tests y restaurar un tenant.
